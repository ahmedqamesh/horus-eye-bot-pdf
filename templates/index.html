<!DOCTYPE html>
<html>
<head>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
            crossorigin="anonymous"
    />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="../static/style.css"/>
    <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="../static/script.js"></script>
    

</head>
<body>
    <div class="container d-flex flex-column vh-100">
        <div class="row align-items-center mt-3 mb-3">
            <!-- Logo in the center/right -->
            <img src="{{ url_for('static', filename='images/horus-logo.png') }}" 
                alt="Horus Logo" 
                style="height:100px;">
            
            <!-- Title on the left -->
            <div class="col-10 d-flex justify-content-center ">
                <h1 class="mb-0">Horus Eye Assistant</h1>
            </div>
        </div>
        <label for="modelSelect">Choose a model:</label>
        <!-- 1. The dropdown must come FIRST -->
        <select id="modelSelect" class="auto-width">
        <option value="llama2-7b">LLaMA 2 (7B)</option>
        <option value="mistral-7b">Mistral 7B</option>
        </select>

        <div class="row flex-grow-1 overflow-auto">
            <div class="col-12 col-md-8 mx-auto d-flex flex-column">
                <div id="chat-window" class="p-3">
                <div id="message-list"></div>
                <div class="loading-animation my-loading">
                    <div class="loading-dots my-loading">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
                <div class="loading-animation">
                    <div class="loading-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
                </div>
                <div class="input-group mt-1">
                    <input type="text" id="message-input" class="form-control" placeholder="Type your message here..." />
                    <div class="input-group-append">
                        <button id="send-button" class="btn btn-primary send">
                            <i class='fa fa-paper-plane'></i>
                        </button>
                        <button id="reset-button" class="btn btn-primary reset">
                            <i class="fa fa-refresh"></i>
                        </button>
                    </div>
                </div>
                <div class="header-sub-text">
                    <p>
                        Copyright © 2026 - Created by A. Qamesh with 
                        <a class="purple">❤</a>
                    </p>
                </div>

            </div>
        </div>
    </div>
    <!-- 2. The script comes LAST -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // Now the browser is sure #modelSelect exists
        const dropdown = document.getElementById("modelSelect");

        if (dropdown) {
            dropdown.addEventListener("change", async function () {
                const MODEL_ID = this.value;
                console.log("Selected MODEL_ID:", MODEL_ID);

                const response = await fetch("/api/dropdown_modules", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        model: MODEL_ID,
                        message: "test"
                    })
                });

                const data = await response.json();
                console.log("Server Response:", data);
            });
        } else {
            console.error("Could not find element with ID 'modelSelect'");
        }
    });
    </script>

</body>
</html>



